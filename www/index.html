<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width">
        <title>Crypto Planner</title>
        <script type="text/javascript" src="cordova.js"></script>
		<link rel="stylesheet"
		href="./css/bootstrap.min.css">
		<script
		src="./js/jquery.min.js"></script>
		<script
		src="./js/bootstrap.min.js"></script>
			
    </head>
 <body>

	<div class="container">
		<h2>Crypto Planner</h2>
		<hr>
		<form class="form-horizontal" id="crud_form">
			<div class="row">
				<div class="form-group">
					<label class="control-label col-lg-2 col-md-2 col-xs-4" for="name">1 BTC To USD:</label>
					<div class="col-lg-2 col-md-2 col-xs-4">
						<input type="text" class="form-control" name="btousd" id="btousd"
							placeholder="press refresh for latest">
					</div>
				</div>
			</div>
			<div class="row">
				<div class="form-group">
				
					<label class="control-label col-lg-2 col-md-2 col-xs-4" for="name">CALC USD BTC:</label>
					<div class="col-lg-2 col-md-2 col-xs-4">
						<input type="text" class="form-control" name="calcusd" id="calcusd"
							placeholder="Enter USD">
					</div>
					<div class="col-lg-2 col-md-2 col-xs-4">
						<input type="text" class="form-control" name="calcbtc" id="calcbtc"
							placeholder="BTC" readonly>
					</div>
				</div>	
			</div>			
			
				<div class="form-group">
				<div class="row">
					<label class="control-label col-lg-2 col-md-2 col-xs-4" for="name">Unit Price In BTC:</label>
					<div class="col-lg-2 col-md-2 col-xs-4">
						<input type="text" class="form-control" name="unitprice" id="unitprice"
							placeholder="Enter Unit Price">
					</div>
					<div class="col-lg-2 col-md-2 col-xs-4">
						<input type="text" class="form-control" name="unitpriceusd" id="unitpriceusd"
							placeholder="Unit Price USD" readonly>
					</div>
				</div>
				</div>

			<div class="row">
				<div class="form-group">
					<label class="control-label col-lg-2 col-md-2 col-xs-4" for="email">Number Of Units:</label>
					<div class="col-lg-2 col-md-2 col-xs-4">
						<input type="text" class="form-control" name="units" id="units"
							placeholder="units to buy /sell">
					</div>
					<div class="col-lg-2 col-md-2 col-xs-4">
						<input type="text" class="form-control" name="totalunitpriceusd" id="totalunitpriceusd"
							placeholder="Total USD" readonly>
					</div>
				</div>
			</div>
			
			<div class="row">
				<div class="form-group">
					<div class="col-lg-offset-2 col-sm-offset-2 col-xs-offset-4 col-lg-3 col-md-3 col-xs-8">
						<button type="button" class="btn btn-success" id="refresh">Refresh Price</button>
						<button type="button" class="btn btn-info" id="calculate">Calculate</button>
					</div>
				</div>
			</div>			
			
		<h3>Miscelleneous Calculator</h3>
		<hr>			

			<div class="row">
				<div class="form-group">
					<label class="control-label col-lg-1 col-md-2 col-xs-4" for="email">Ticker:</label>
					<div class="col-lg-2 col-md-2 col-xs-8">
						<label class="radio-inline"><input type="radio" id="ticker" name="ticker" value="BTC">BTC</label>
						<label class="radio-inline"><input type="radio" id="ticker" name="ticker" value="USD">USD</label>				
					</div>
				</div>
			</div>
			
			<div class="row">
				<div class="form-group">
					<label class="control-label col-lg-1 col-md-1 col-xs-2" for="email">#1:</label>
					<div class="col-lg-2 col-md-2 col-xs-10">
						<input type="text" class="form-control" name="calc1" id="calc1"
							placeholder="units">
					</div>
					<label class="control-label col-lg-1 col-md-1 col-xs-2" for="email">#2:</label>
					<div class="col-lg-2 col-md-2 col-xs-10">
						<input type="text" class="form-control" name="calc2" id="calc2"
							placeholder="units">
					</div>
					<label class="control-label col-lg-1 col-md-1 col-xs-2" for="email">#3:</label>
					<div class="col-lg-2 col-md-2 col-xs-10">
						<input type="text" class="form-control" name="calc3" id="calc3"
							placeholder="units">
					</div>				
					<label class="control-label col-lg-1 col-md-1 col-xs-2" for="email">#4:</label>
					<div class="col-lg-2 col-md-2 col-xs-10">
						<input type="text" class="form-control" name="calc4" id="calc4"
							placeholder="units">
					</div>
				</div>		
			</div>			
			
			<div class="row">
				<div class="form-group">
					<label class="control-label col-lg-1 col-md-1 col-xs-2" for="email">Total:</label>
					<div class="col-lg-2 col-md-2 col-xs-5">
						<input type="text" class="form-control" name="total" id="total"
							placeholder="total">
					</div>
					<div class="col-lg-2 col-md-2 col-xs-5">
						<input type="text" class="form-control" name="totalusd" id="totalusd"
							placeholder="Total USD" readonly>
					</div>				
				</div>		
			</div>		
			
			<div class="row">
				<div class="form-group">
					<div class="col-lg-offset-1 col-sm-offset-1 col-xs-offset-2 col-lg-3 col-md-3 col-xs-10">
						<button type="button" class="btn btn-info" id="calculate1">Calculate</button>
					</div>
				</div>
			</div>
			
		</form>
	</div>


	<script>
$(document).ready(function() {

	//form to object
	$.fn.serializeObject = function()
	{
	   var o = {};
	   var a = this.serializeArray();
	   $.each(a, function() {
	       if (o[this.name]) {
	           if (!o[this.name].push) {
	               o[this.name] = [o[this.name]];
	           }
	           o[this.name].push(this.value || '');
	       } else {
	           o[this.name] = this.value || '';
	       }
	   });
	   return o;
	};
	
	var updateTable = function(data){
        var trHTML = '';
		$.each(data, function (i, transaction) {
		trHTML += '<tr><td>' + transaction.sender + '</td><td>' + transaction.receiver 
		+ '</td><td>' + transaction.amount + '</td>'+'</tr>';
		});

		$('#listTable tbody').html(trHTML);
	};
	
	// separator was added for python api which treats /api/persons not same as /api/persons/
	var getData=function(){
		$.ajax({
			url: "http://blockchain.info/ticker",
	        type: "GET",
	        data:null,
	        contentType: 'application/json; charset=utf-8',

	        success: function (a,b,c) {
	        	//console.log("Done Fetching Data");
	        	//console.log(JSON.stringify(a));
				$("#btousd").val(a["USD"]["last"]+" USD")
	        	//updateTable(a);
	        },
	        error: function () {
	        	console.log("Error Fetching Data");	        
	        }
	    });		
	};	
	
	//Get
	$("#refresh").click(function(){getData()});	
	
	/*$("#calculate").click(function(){
		
	if ($("#unitprice").val().length == 0){
		//alert("enter unit price in BTC");
	}else{
		pricePerUnitUSD = parseFloat($("#unitprice").val()) * parseFloat($("#btousd").val());
		$("#unitpriceusd").val(pricePerUnitUSD+" USD")
		
		if ($("#units").val().length != 0){
		totalUnitPriceUSD = parseFloat($("#unitpriceusd").val()) * parseFloat($("#units").val())
		$("#totalunitpriceusd").val(totalUnitPriceUSD+" USD")
		}
	}
	}
	);*/	

	$("#calculate, #calculate1").click(function(){
	total = 0.0
	for (i=1;i<5;i++){
	field = "#calc"+i
	
	if ($(field).val().length > 0){
	total += parseFloat($(field).val())
	}
	
	}	
	$("#total").val(total)
	if ($("#total").val().length != 0){
		totalUSD = $("#total").val();
		if ($('input:radio[name=ticker]:checked').val() == "BTC"){
		totalUSD = parseFloat($("#total").val()) * parseFloat($("#btousd").val())
		}
		$("#totalusd").val(totalUSD +" USD")
	}
	if ($('input:radio[name=ticker]:checked').val() == "BTC"){
	}else
	{
		if ($('input:radio[name=ticker]:checked').val() == "USD"){
		}
	}
	if ($("#unitprice").val().length != 0){
		pricePerUnitUSD = parseFloat($("#unitprice").val()) * parseFloat($("#btousd").val());
		$("#unitpriceusd").val(pricePerUnitUSD+" USD")
		
		if ($("#units").val().length != 0){
		totalUnitPriceUSD = parseFloat($("#unitpriceusd").val()) * parseFloat($("#units").val())
		$("#totalunitpriceusd").val(totalUnitPriceUSD+" USD")
		}
	}
	
	if ($("#calcusd").val().length != 0){
		btccalc = $("#calcusd").val() / parseFloat($("#btousd").val())
		$("#calcbtc").val(btccalc)
	}
	
	}
	);	
	
	
	
	getData();
	$('input:radio[name=ticker]')[0].checked = true

});

</script>

</body>
</html>
